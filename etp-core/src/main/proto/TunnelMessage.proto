syntax = "proto3";

package com.xiaoniucode.etp.core.protocol;
option java_outer_classname = "TunnelMessage";
message Message {
  enum Type {
    AUTH = 0;
    CONNECT = 1;
    DISCONNECT = 2;
    TRANSFER = 3;
    HEARTBEAT = 4;
    ERROR = 5;
    PROXY_REGISTER = 6;
    PROXY_UNREGISTER = 7;
  }
  Type type = 1;
  int64 session_id = 2;
  bytes payload = 3;
  uint32 port = 4;
  string ext = 5;
}
message ProxyRequest {
  optional string proxy_name = 1;
  optional string local_host = 2;
  uint32 local_port = 3;
  optional uint32 remote_port = 4;
  string protocol = 5;
  map<string, string> metadata = 6;
  optional bool auto_start = 7;
}
message ProxyResponse {
  bool success = 1;
  string message = 2;
  int32 proxy_id = 3;
  string external_url = 4;
}
